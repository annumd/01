const express = require('express');
const bodyParser = require('body-parser');
const cors = require('cors');
require('dotenv').config();

const app = express();
const port = 3000;

// In-memory storage for submitted names
let namePairs = [];

// Middleware
app.use(bodyParser.json());
app.use(cors());

// Endpoint to handle form submission
app.post('/send-names', (req, res) => {
    const { name1, name2 } = req.body;

    // Check for admin access
    if (name1 === 'admin123' && name2 === 'admin123') {
        // Send back the stored name pairs
        return res.status(200).json({ isAdmin: true, namePairs });
    }

    // Store the name pair if not the admin check
    namePairs.push({ name1, name2 });
    res.status(200).send({ message: 'Names received and stored' });
});

app.listen(port, () => {
    console.log(`Server running at http://localhost:${port}`);
});
